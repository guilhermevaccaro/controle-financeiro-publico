<form [formGroup]="form">
  <div class="display-flex">
    <span class="p-float-label">
      <input type="text" pInputText formControlName="codigoPedido" />
      <label htmlFor="codigoPedido">Código do Pedido</label>
    </span>

    <p-calendar
      placeholder="dd/mm/yyyy"
      formControlName="data"
      dateFormat="dd/mm/yy"
      appendTo="body"
      iconDisplay="input"
      [showIcon]="true"
    ></p-calendar>
    <p-dropdown
      appendTo="body"
      [options]="situacaoOpcoes"
      optionLabel="nome"
      placeholder="Situação"
      formControlName="situacao"
      [showClear]="false"
      class="full-width"
    ></p-dropdown>
  </div>
  <div class="display-flex">
    <p-dropdown
      appendTo="body"
      [options]="nome"
      optionLabel="nome"
      placeholder="Fornecedor / Cliente"
      formControlName="fornecedor"
      [showClear]="false"
      class="full-widt"
    ></p-dropdown>

    <input
      type="text"
      pInputText
      placeholder="Descrição"
      formControlName="descricao"
    />

    <p-button (click)="addPeca(form.value)">Adicionar Peça</p-button>
  </div>
  <p-divider></p-divider>

  <div
    formArrayName="pecas"
    *ngFor="let pecas of getPecasFormArray(); let i = index"
  >
    <div [formGroupName]="i" class="display-flex">
      <p-dropdown
        appendTo="body"
        [options]="estoque"
        optionLabel="nome"
        placeholder="Peça"
        formControlName="item"
        [showClear]="false"
        class="full-width"
        (onChange)="selecionouPeca($event, i)"
      ></p-dropdown>

      <div>
        <span class="p-float-label">
          <p-inputNumber
            formControlName="quantidadeAdicionada"
            class="full-width"
          ></p-inputNumber>
          <label for="">Quantidade</label>
        </span>
      </div>
      <div>
        <span class="p-float-label">
          <p-inputNumber
            formControlName="valorUnitario"
            mode="currency"
            currency="BRL"
            class="full-width"
            locale="pt-BR"
            [title]="'Teste'"
          ></p-inputNumber>
          <label htmlFor="number-input">Valor Unitário</label>
        </span>
      </div>
      <p-button
        icon="pi pi-times"
        [rounded]="true"
        [text]="true"
        severity="danger "
        (onClick)="removerPeca(i)"
      ></p-button>
    </div>
  </div>
  <p-divider></p-divider>
</form>

<div class="space-between">
  <p-button color="primary" (click)="onSubmit()"> Salvar </p-button>
  <p-button severity="danger" (click)="onCancel()">Cancelar</p-button>
</div>
